<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Registration ‚Äì CivicConnect</title>
<style>
  :root {
    --bg: #F8FAFC;
    --surface: #FFFFFF;
    --primary: #1D4ED8;
    --primary-2: #3B82F6;
    --text: #1E293B;
    --muted: #64748B;
    --border: #E2E8F0;
    --shadow: 0 8px 24px rgba(2, 6, 23, .08);
    --radius: 14px;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    background: var(--bg);
    color: var(--text);
  }

  .register-card {
    background: var(--surface);
    padding: 32px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    width: 100%;
    max-width: 420px;
    text-align: center;
  }

  .register-card h1 {
    margin-bottom: 8px;
    font-size: 1.6rem;
    color: var(--primary);
  }

  .form-group {
    margin-bottom: 16px;
    text-align: left;
  }

  label {
    display: block;
    margin-bottom: 6px;
    font-size: 0.9rem;
    color: var(--text);
  }

  input {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid var(--border);
    border-radius: 8px;
    font-size: 1rem;
    color: var(--text);
    background: var(--bg);
    outline: none;
  }

  input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(29, 78, 216, 0.2);
  }

  .btn {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s ease;
  }

  .btn.primary {
    background: var(--primary);
    color: #fff;
  }

  .btn.primary:hover {
    background: #163EB5;
  }

  .footer-text {
    margin-top: 18px;
    font-size: 0.85rem;
    color: var(--muted);
  }

  .footer-text a {
    color: var(--primary);
    text-decoration: none;
  }

  .footer-text a:hover {
    text-decoration: underline;
  }

  .error {
    color: red;
    font-size: 0.85rem;
    margin-top: -10px;
    margin-bottom: 10px;
    display: none;
  }

  .user-reg-fom-div
  {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  header {
    background: var(--primary);
    color: #fff;
    padding: 16px 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: var(--shadow);
  }

  header h1 {
    margin: 0;
    font-size: 1.4rem;
  }

  nav a {
    color: #fff;
    margin-left: 20px;
    text-decoration: none;
    font-weight: 600;
  }

  nav a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>

  <header>
    <h1>üèõÔ∏è CivicConnect</h1>
    <nav>
      <a href="{{ url_for('index') }}">Back</a>
    </nav>
  </header> 

<div class="user-reg-fom-div">
  <div class="register-card">
    <h1>User Registration</h1>
    <form id="registerForm">
      <div class="form-group">
        <label for="fname">First Name</label>
        <input type="text" id="fname" name="fname" placeholder="Enter first name" required>
      </div>

      <div class="form-group">
        <label for="lname">Last Name</label>
        <input type="text" id="lname" name="lname" placeholder="Enter last name" required>
      </div>

      <div class="form-group">
        <label for="usrname">Username</label>
        <input type="text" id="usrname" name="usrname" placeholder="Choose a username" required>
      </div>

      <div class="form-group">
          <label for="ward">Ward</label>
          <select name="ward" id="ward1" required>
          <option value="">-- Select Ward --</option>
          <option value="1">1 - FORT KOCHI</option>
          <option value="2">2 - KALVATHY</option>
          <option value="3">3 - EARAVELY</option>
          <option value="4">4 - KARIPPALAM</option>
          <option value="5">5 - MATTANCHERY</option>
          <option value="6">6 - KOCHANGADI</option>
          <option value="7">7 - CHERALAYI</option>
          <option value="8">8 - PANAYAPPILLY</option>
          <option value="9">9 - CHAKKAMADOM</option>
          <option value="10">10 - KARUVELIPPADY</option>
          <option value="11">11 - THOPPUMPADY</option>
          <option value="12">12 - THAREBHAGAM</option>
          <option value="13">13 - KADEBHAGAM</option>
          <option value="14">14 - THAZHUPPU</option>
          <option value="15">15 - EDAKOCHI NORTH</option>
          <option value="16">16 - EDAKOCHI SOUTH</option>
          <option value="17">17 - PERUMBADAPPU</option>
          <option value="18">18 - KONAM</option>
          <option value="19">19 - PALLURUTHY-KACHERIPADY</option>
          <option value="20">20 - NAMBYAPURAM</option>
          <option value="21">21 - PULLARDESAM</option>
          <option value="22">22 - MUNDAMVELLY</option>
          <option value="23">23 - MANASSERY</option>
          <option value="24">24 - MOOLAMKUZHY</option>
          <option value="25">25 - CHULLICKAL</option>
          <option value="26">26 - NASRATHU</option>
          <option value="27">27 - FORTKOCHI VELI</option>
          <option value="28">28 - AMARAVATHY</option>
          <option value="29">29 - ISLAND NORTH</option>
          <option value="30">30 - ISLAND SOUTH</option>
          <option value="31">31 - VADUTHALA WEST</option>
          <option value="32">32 - VADUTHALA EAST</option>
          <option value="33">33 - ELAMAKKARA NORTH</option>
          <option value="34">34 - PUTHUKKALAVATTAM</option>
          <option value="35">35 - PONEKKARA</option>
          <option value="36">36 - KUNNUMPURAM</option>
          <option value="37">37 - EDAPPALLY</option>
          <option value="38">38 - DHEVANKULANGARA</option>
          <option value="39">39 - MAMANGALAM</option>
          <option value="40">40 - PADIVATTAM</option>
          <option value="41">41 - VENNALA</option>
          <option value="42">42 - PALARIVATTAM</option>
          <option value="43">43 - KARANAKKODAM</option>
          <option value="44">44 - THAMMANAM</option>
          <option value="45">45 - CHAKKARAPARAMBU</option>
          <option value="46">46 - CHALIKKAVATTAM</option>
          <option value="47">47 - PONNURUNNI EAST</option>
          <option value="48">48 - VYTTILA</option>
          <option value="49">49 - CHAMBHAKKARA</option>
          <option value="50">50 - POONTHURA</option>
          <option value="51">51 - VYTTILA JANATHA</option>
          <option value="52">52 - PONNURUNNI</option>
          <option value="53">53 - ELAMKULAM</option>
          <option value="54">54 - GIRINAGAR</option>
          <option value="55">55 - PANAMPILLI NAGAR</option>
          <option value="56">56 - KADAVANTHRA</option>
          <option value="57">57 - KONTHURUTHY</option>
          <option value="58">58 - THEVARA</option>
          <option value="59">59 - PERUMANUR</option>
          <option value="60">60 - RAVIPURAM</option>
          <option value="61">61 - ERNAKULAM SOUTH</option>
          <option value="62">62 - GANDHI NAGAR</option>
          <option value="63">63 - KATHRIKADAVU</option>
          <option value="64">64 - ELAMKULAM SOUTH</option>
          <option value="65">65 - KALOOR SOUTH</option>
          <option value="66">66 - ERNAKULAM CENTRAL</option>
          <option value="67">67 - ERNAKULAM NORTH</option>
          <option value="68">68 - AYYAPPANKAVU</option>
          <option value="69">69 - THRIKKANARVATTOM</option>
          <option value="70">70 - KALOOR NORTH</option>
          <option value="71">71 - ELAMAKKARA SOUTH</option>
          <option value="72">72 - POTTAKUZHY</option>
          <option value="73">73 - PACHALAM</option>
          <option value="74">74 - THATTAZHAM</option>
        </select>
      </div>
     
      <div class="form-group">
        <label for="phone">Phone Number</label>
        <input type="text" id="phone" name="phone" placeholder="Enter phone number" required minlength="10" maxlength="10">
      </div>

      <div class="form-group">
        <label for="paswd">Password</label>
        <input type="password" id="paswd" name="paswd" placeholder="Enter password" required>
      </div>

      <div class="form-group">
        <label for="confirm-password">Confirm Password</label>
        <input type="password" id="confirm-password" name="confirm-password" placeholder="Re-enter password" required>
        <div class="error" id="error-msg">‚ö†Ô∏è Passwords do not match</div>
      </div>

      <button type="submit" class="btn primary">Register</button>
    </form>

    <div class="footer-text">
      <p>Already an admin? <a href="{{ url_for('admin_login') }}">Login here</a></p>
    </div>
  </div>
</div>

  <script>
    const form = document.getElementById('registerForm');
    const password = document.getElementById('paswd');
    const confirmPassword = document.getElementById('confirm-password');
    const errorMsg = document.getElementById('error-msg');

    form.addEventListener('submit', async function(e) {
      e.preventDefault();

      if (password.value !== confirmPassword.value) {
        errorMsg.style.display = 'block';
        return;
      } else {
        errorMsg.style.display = 'none';
      }

      const formData = {
        fname: document.getElementById('fname').value,
        lname: document.getElementById('lname').value,
        usrname: document.getElementById('usrname').value,
        paswd: document.getElementById('paswd').value,
        phone: document.getElementById('phone').value
      };

      try {
        const response = await fetch('/register', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });

        if (response.ok) {
          alert("‚úÖ Registration successful!");
          window.location.href = "/";  // redirect to homepage or dashboard
        } else {
          const msg = await response.text();
          alert("‚ö†Ô∏è Registration failed: " + msg);
        }
      } catch (error) {
        console.error("Error:", error);
        alert("‚ö†Ô∏è Something went wrong. Please try again.");
      }
    });
  </script>
</body>
</html>
